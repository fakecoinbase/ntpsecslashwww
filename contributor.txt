= Contribution workflow and conventions =
:toc!:
:numbered!:

== GitLab.com is our forge  ==

We use GitLab.com as our forge.

Our GitLab group is at https://gitlab.com/groups/NTPsec

Please used the issue tracker and the pull request process at GitLab.com.

== GitHub.com is a mirror, not our forge ==

We maintain a public mirror of the repo at https://github.com/ntpsec/ntpsec

Please do not use GitHub issues or GitHub pull requests.

== Hacking guide ==

Please read and follow the .../devel/hacking.txt file in the ntpsec repo.

== License of contributions ==

Annoying but necessary legalese:

    By submitting patches to this project, you agree to allow them to be
    redistributed under the project's license according to the normal
    forms and usages of the open-source community.

The license of new code is to be BSD-2-clause and the license for new
documentation is to be Creative Commons Attribute 4.0 License.
Contributions and patches with no license information will be assumed
to be under those licenses.

Please do *not* submit code under GPL or other licenses which place
conditions on derived works; we cannot accept such code.

It is your responsibility to make sure you have the necessary rights
to contribute a patch to the project.

== Development Practice  ==

Before starting significant work, propose it first in the
mailto:devel@ntpsec.org mailing list.  Other people may have
suggestions, will want to collaborate, and will wish to review your
code.

Please work on one piece of conceptual work at a time.  Keep each
narrative of work each in a different branch.

As much as possible, have each patch solve one problem.

A patch needs to comfortably fit in a reviewer's head.

A patch must not leave the project in a non-functional state.

== Optional: Send patches by email ==

If you do not want to use GitLab pull requests, we welcome simple fix
and "drive by" patches submitted by email.

Please create the patch with git format-patch against the tip of
master of the main public repo.

You can email your patch to mailto:devel@ntpsec.org if are a member of
that mailing list, or you can email your patch to
mailto:contact@ntpsec.org if you do not.

Please make sure your "From:" header in the email is correct, as that
is what will be used as attribution of the commit.

The person on the team that merges in your patch will use the git
parameter ---author from the email's From header and the git parameter
--date from the email's Date header.

For complex patches and contribtion narratives, please use GitLab.

=== Commit comments ===

And please follow git conventions for change comments. That means your comment
should consist of:

* A summary line, never more than 69 characters long and ideally no more than
  50 characters long.  These numbers are set by the window sizes of various
  common web views of git repositories.

* Your summary line should be terse and imperative.  "Fix bug #666" "Add DWIM
  feature" and "Typo repair" are good summary lines.

* If your comment is longer than the summary line, separate it from
  the summary with a blank line.

* The remainder of your comment should be one or more paragraphs line-wrapped at
  72 characters - please do *not* enter entire paragraphs as single lines, it
  makes life more difficult for browsing tools and people viewing the output of
  git format-patch. Bulleted list items are also OK.

* In some cases it may be appropriate to end your summary line with a comma
  or ellipsis ("...") to indicate that it runs dictly into a following paragraph.
  You should still try to make the summary self-contained when you do this.

Finally, it is not necessary (and is in fact bad style) to list all
the files a multi-file commit touches in the comment for it.  The
--name-status, --name-only, and --stat options of git log will report
this information to users who want it.  It is still appropriate
to list a file path if you have something specific to say about that
individual file, or if it's the only one touched in a single-file
change and you can easily fit it in the summary line along with your
summary.

Yes, we know the pre-git portions of the history violate some of these.
That was then, this is now.

=== How to refer to previous commits ===

The best (most human-friendly) way to reference a commit is by quoting its
summary line.  If you need to disambiguate, give its date and author.

The worst way is to quote its git hash, because humans are not good at
keeping random strings of hex digits in working memory.  Besides, hashes
will break if the history is ever moved to another VCS or the repository
has to be surgically altered.



// end

